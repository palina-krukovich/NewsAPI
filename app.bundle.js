!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.exports=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}},function(e,t,n){var o=n(6),r=n(7);e.exports=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?r(e):t}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var o=n(8);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}},function(e,t,n){},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=o=function(e){return n(e)}:e.exports=o=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},o(t)}e.exports=o},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){function n(t,o){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,o)}e.exports=n},function(e,t,n){"use strict";n.r(t);n(5);var o=n(0),r=n.n(o),i=n(1),c=n.n(i),u=n(2),a=n.n(u),l=n(3),s=n.n(l),d=n(4),h=n.n(d),f=function(){function e(){r()(this,e),this.events={}}return c()(e,[{key:"on",value:function(e,t){return this.events[e]=this.events[e]||[],this.events[e].push(t),this}},{key:"off",value:function(e,t){var n=this.events[e];if(!n)return this;for(var o=0;o<n.length;o++)if(n[o]===t){n.splice(o,1);break}return this}},{key:"once",value:function(e,t){this.events[e]=this.events[e]||[];return this.events[e].push(function n(){t(),this.off(e,n)}),this}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var r=this.events[e];return!!r&&(r.forEach(function(e){e.apply(void 0,n)}),!0)}},{key:"listenerCount",value:function(e){return(this.events[e]||[]).length}},{key:"rowListeners",value:function(e){return this.events[e]}}]),e}(),p=function(e){function t(){var e;return r()(this,t),(e=a()(this,s()(t).call(this))).startURL="https://newsapi.org/v2/",e.sources="sources?",e.topHeadlines="top-headlines?",e.everything="everything?",e.apiKeyURL="apiKey=5878ce9411164b5398895920c506a413",e}return h()(t,e),c()(t,[{key:"loadSources",value:function(){var e=this,t=this.startURL+this.sources+this.apiKeyURL,n=new Request(t);return fetch(n).then(function(e){return e.json()}).then(function(t){return e.emit("loadSourcesComplete",t)})}},{key:"loadTopHeadlines",value:function(e){var t=this,n="".concat(this.startURL).concat(this.topHeadlines,"country=gb&pageSize=5&page=").concat(e,"&").concat(this.apiKeyURL),o=new Request(n);return fetch(o).then(function(e){return e.json()}).then(function(e){return t.emit("loadTopHeadlinesComplete",e)})}},{key:"loadEverythingFromSource",value:function(e,t){var n=this,o="".concat(this.startURL).concat(this.everything,"pageSize=5&page=").concat(e,"&sources=").concat(t,"&").concat(this.apiKeyURL),r=new Request(o);return fetch(r).then(function(e){return e.json()}).then(function(e){return n.emit("loadEverythingFromSourceComplete",e)})}},{key:"searchEverything",value:function(e,t){var n=this,o="".concat(this.startURL).concat(this.everything,"q=").concat(t,"&pageSize=5&page=").concat(e,"&").concat(this.apiKeyURL),r=new Request(o);return fetch(r).then(function(e){return e.json()}).then(function(e){return n.emit("searchEverythingComplete",e)})}}]),t}(f),y=function(e){function t(){var e;return r()(this,t),(e=a()(this,s()(t).call(this))).newsAPI=new p,e.newsAPI.on("loadSourcesComplete",function(t){return e.emit("loadSourcesComplete",t)}),e.newsAPI.on("loadTopHeadlinesComplete",function(t){return e.emit("loadTopHeadlinesComplete",t)}),e.newsAPI.on("loadEverythingFromSourceComplete",function(t){return e.emit("loadEverythingFromSourceComplete",t)}),e.newsAPI.on("searchEverythingComplete",function(t){return e.emit("searchEverythingComplete",t)}),e.load=String("top"),e.src=String(""),e.page=1,e.q=String(""),e}return h()(t,e),c()(t,[{key:"loadSources",value:function(){this.newsAPI.loadSources()}},{key:"loadTopHeadlines",value:function(){this.load=String("top"),this.page=1,this.newsAPI.loadTopHeadlines(this.page),this.page++}},{key:"loadArticlesFromSource",value:function(e){this.load=String("fromSrc"),this.src=String(e),this.page=1,this.newsAPI.loadEverythingFromSource(this.page,this.src),this.page++}},{key:"searchEverything",value:function(e){e?(this.load=String("search"),this.q=String(e),this.page=1,this.newsAPI.searchEverything(this.page,this.q),this.page++):this.loadTopHeadlines()}},{key:"loadMore",value:function(){this.page<9?("top"===this.load?this.newsAPI.loadTopHeadlines(this.page):"fromSrc"===this.load?this.newsAPI.loadEverythingFromSource(this.page,this.src):"search"===this.load&&this.newsAPI.searchEverything(this.q),this.page++):this.emit("maxNewsCountArchived")}}]),t}(f),m=function(e){function t(){var e;return r()(this,t),(e=a()(this,s()(t).call(this))).initEvents(),e}return h()(t,e),c()(t,[{key:"initEvents",value:function(){var e=this;document.querySelector(".main__button_load-more").addEventListener("click",function(t){t.preventDefault(),e.emit("loadMoreBtnClick")}),document.querySelector(".header__search_submit").addEventListener("click",function(t){t.preventDefault(),e.emit("searchSubmit",document.querySelector(".header__search").value)}),document.querySelector(".header__search").addEventListener("keyup",function(t){t.preventDefault(),13===t.keyCode&&e.emit("searchSubmit",document.querySelector(".header__search").value)}),document.querySelector(".header__title__box").addEventListener("click",function(t){t.preventDefault(),e.emit("logoClick")})}},{key:"displaySources",value:function(e){var t=this;if(void 0!==e.sources){document.querySelector(".conn-failed-message").style.display="none";for(var n=document.querySelector("#nav-button-template"),o=document.querySelector(".nav"),r=document.createDocumentFragment(),i=function(o){var i=n.content.cloneNode(!0).querySelector(".nav__item");i.id=e.sources[o].id,i.innerHTML=e.sources[o].name,i.addEventListener("click",function(e){e.preventDefault(),t.emit("srcBtnClick",i.id)}),r.appendChild(i)},c=0;c<e.sources.length;c++)i(c);o.appendChild(r)}else document.querySelector(".conn-failed-message").style.display="block",document.querySelector(".main__button_load-more").style.display="none"}},{key:"displayArticles",value:function(e){if(void 0!==e.articles){document.querySelector(".conn-failed-message").style.display="none";var t=document.querySelector("#article-template"),n=document.querySelector(".main__content");n.innerHTML="";for(var o=document.createDocumentFragment(),r=0;r<e.articles.length;r++){var i=t.content.cloneNode(!0).querySelector(".main__article");e.articles[r].urlToImage&&(i.querySelector(".main__article__figure").style.backgroundImage="url(".concat(e.articles[r].urlToImage,")"),i.querySelector(".main__article_icon").style.display="none"),i.querySelector(".main__article_author").innerHTML=e.articles[r].author,i.querySelector(".main__article_date").innerHTML=e.articles[r].publishedAt.slice(0,10).split("-").reverse().join("-"),i.querySelector(".main__article_title").innerHTML=e.articles[r].title,i.querySelector(".main__article_source").innerHTML=e.articles[r].source.name,i.querySelector(".main__article_description").innerHTML=e.articles[r].description,i.querySelector(".main__article_url").setAttribute("href",e.articles[r].url),o.appendChild(i)}n.appendChild(o),e.articles.length?document.querySelector(".no-results-message").style.display="none":document.querySelector(".no-results-message").style.display="block",e.articles.length<5?document.querySelector(".main__button_load-more").style.display="none":document.querySelector(".main__button_load-more").style.display="block"}else document.querySelector(".conn-failed-message").style.display="block",document.querySelector(".main__button_load-more").style.display="none"}},{key:"hideLoadMoreBtn",value:function(){document.querySelector(".main__button_load-more").style.display="none"}}]),t}(f),v=function(e){function t(){var e;return r()(this,t),(e=a()(this,s()(t).call(this))).model=new y,e.view=new m,e.model.on("loadSourcesComplete",function(t){return e.view.displaySources(t)}),e.model.on("loadTopHeadlinesComplete",function(t){return e.view.displayArticles(t)}),e.model.on("loadEverythingFromSourceComplete",function(t){return e.view.displayArticles(t)}),e.model.on("searchEverythingComplete",function(t){return e.view.displayArticles(t)}),e.model.on("maxNewsCountArchived",function(){return e.view.hideLoadMoreBtn()}),e.view.on("srcBtnClick",function(t){return e.model.loadArticlesFromSource(t)}),e.view.on("loadMoreBtnClick",function(){return e.model.loadMore()}),e.view.on("searchSubmit",function(t){return e.model.searchEverything(t)}),e.view.on("logoClick",function(){return e.model.loadTopHeadlines()}),e}return h()(t,e),c()(t,[{key:"initPage",value:function(){this.model.loadSources(),this.model.loadTopHeadlines()}}]),t}(f);(new(function(){function e(){r()(this,e),this.controller=new v}return c()(e,[{key:"run",value:function(){this.controller.initPage()}}]),e}())).run()}]);
//# sourceMappingURL=app.bundle.js.map